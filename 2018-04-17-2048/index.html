<!DOCTYPE html>
<html lang="zh-CN">



<!-- Head tag -->
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
    
    <title>
    
    Spades
    </title>
    
    <meta name="keywords" content="">
    <meta name="description" content="Warning: inexperienced programmer inside!">
    <meta name="author" content="Dr. A. Clef">
    
    <link rel="alternate" type="application/atom+xml" hrel="/atom.xml">
    
    <link rel="Shortcut Icon" href="/favicon.ico" type="image/x-icon">
    
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <link href="/css/responsive.css" rel="stylesheet" type="text/css" media="screen and (max-width: 768px)">
    <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://cdn.bootcss.com/cc-icons/1.2.1/css/cc-icons.min.css" rel="stylesheet" type="text/css">
    <script src="https://cdn.bootcss.com/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script>
    <script src="/js/dropdown.js" type="text/javascript" async></script>
    <script src="/js/sidebar.js" type="text/javascript" async></script>
    
</head>


<body class="single">
    <div id="header">
    <div class="container clearfix">
        <div class="logo" style="width: auto;">
            <a href="/" title="Spades" rel="home" style="text-decoration: none;">
                
                <span class="brand-logo">
                    
                    Spades
                    
                
                </span>
            </a>
        </div>
        
<form method="get" class="search-form" action="/search.html">
    <input type="text" name="s" class="search-input" placeholder="输入关键词" />
    <button type="submit" class="search-submit">
        <span class="fa fa-search"></span>
    </button>
</form>


        <div class="global-nav">
            <ul class="gnul">
                <li class="gnli ">
                    <a class="gna" href="/" title="Spades">
                        <span class="fa fa-home"></span><span>主页</span>
                    </a>
                </li>
                
                <li class="gnli dropdown current">
                    <a class="gna dropdown-link fa fa-bars" href="javascript:;">
                        <span>导航</span>
                    </a>
                    <div class="dropdown-arrow1"></div>
                    <div class="dropdown-arrow2"></div>
                    <div class="submenu">
                        <div class="tab-content">
                            <table>
                                <tbody>
                                    
                                    <tr class="trline">
                                        <td class="tdleft">分类</td>
                                        <td class="tdright">
                                            <div class="tab-categories">
                                                <ul>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/CSS/">CSS</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/JavaScript/">JavaScript</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/readlist/">readlist</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/工程/">工程</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/运维/">运维</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/随笔/">随笔</a>
                                                    </li>
                                                
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                    
                                    <!-- <tr>
                                        <td class="tdleft">标签</td>
                                        <td class="tdright">
                                            <div class="tab-tags">
                                                <a href="/tags/阅读整理/" style="font-size: 12px;">阅读整理</a> <a href="/tags/个人总结/" style="font-size: 12px;">个人总结</a> <a href="/tags/杂感/" style="font-size: 12px;">杂感</a>
                                            </div>
                                        </td>
                                    </tr> -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>
                
                
                <li class="gnli">
                    <a class="gna" href="/archives/" title="">
                        <span class="fa fa-archive"></span>归档
                    </a>
                </li>
                
                <li class="gnli">
                    <a class="gna" href="/about/" title="">
                        <span class="fa fa-user"></span>关于
                    </a>
                </li>
                
                <li class="gnli">
                    <a class="gna" href="/2017-08-29-readlist" title="">
                        <span class="fa fa-book"></span>阅读列表
                    </a>
                </li>
                
                
                
            </ul>
        </div>
    </div>
        <div id="motto">
            
        </div>
</div>

    <div id="content">
    <div class="container clearfix">
        <div id="primary" class="no-toc">
            
            <div class="breadcrumb-navigation">
                <a rel="bookmark" href="/">
                    主页
                </a>
                <span class="breadcrumb-arrow fa fa-angle-right"></span>
                 
未分类

                    <span class="breadcrumb-arrow fa fa-angle-right"></span>
                    
            </div>
            
            <div class="single-post">
              
                <div class="post-header">
                    <h2 class="post-title">
                        <a href="/2018-04-17-2048/" title="">
                            
                        </a>
                    </h2>
                </div>
              
                 <div class="post-meta">
                    <ul class="inline-ul">
                        <li class="inline-li">
                            2018-04-17
                        </li>
                        
                        
                        <li class="inline-li">
                            <span class="post-span">·</span>
                        </li>
                        <li class="inline-li">
                            <span id="busuanzi_value_page_pv"></span> Views
                        </li>
                        
                    </ul>
                </div>
                <div class="post-body clearfix">
                    <div class="post-content">
                        
                                <!-- Created by Spades<spades@gmail.com> on 18/04/16-->
<p>&lt;!doctype html&gt;</p>
<html lang="en"><br><head><br><br>    <meta charset="UTF-8"><br>    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"><br>    <title>2048</title><br>    <style><br>    /<em><br>    ** Created by Spades<a href="&#109;&#97;&#x69;&#x6c;&#116;&#111;&#58;&#115;&#x70;&#97;&#x64;&#x65;&#x73;&#103;&#101;&#64;&#x67;&#109;&#97;&#x69;&#108;&#x2e;&#x63;&#111;&#109;">&#115;&#x70;&#97;&#x64;&#x65;&#x73;&#103;&#101;&#64;&#x67;&#109;&#97;&#x69;&#108;&#x2e;&#x63;&#111;&#109;</a> on 18/04/16
    </em>/<br>    body {<br>        margin: 0;<br>    }<br><br>    main {<br>        position: absolute;<br>        top: 0;<br>        right: 0;<br>        bottom: 0;<br>        left: 0;<br>        margin: auto;<br>        width: 600px;<br>        height: 600px;<br>    }<br><br>    .header {<br>        line-height: 50px;<br>        text-align: center;<br>    }<br><br>    #restart {<br>        margin-left: 30px;<br>    }<br><br>    .container {<br>        display: flex;<br>        flex-direction: column;<br>        justify-content: space-around;<br>        border-radius: 8px;<br>        margin-top: 50px;<br>        margin-left: 100px;<br>        width: 400px;<br>        height: 400px;<br>        border: 10px solid #bbada0;<br>        background: #bbada0;<br>    }<br><br>    .row {<br>        display: flex;<br>        justify-content: space-around;<br>        margin-bottom: 10px;<br>        flex: 1 1;<br>    }<br><br>    .row:last-child {<br>        margin-bottom: 0;<br>    }<br><br>    .cell {<br>        flex: 1 1;<br>        margin-left: 10px;<br>        font-size: 30px;<br>        font-weight: 700;<br>        line-height: 92px;<br>        text-align: center;<br>        background: #cdc0b4;<br>        color: #776d65;<br>        user-select: none;<br>    }<br><br>    .cell:first-child {<br>        margin-left: 0;<br>    }<br><br>    .cell.lv2 {<br>        background: #eee4da;<br>    }<br><br>    .cell.lv4 {<br>        background: #ede0c9;<br>    }<br><br>    .cell.lv8 {<br>        background: #f3b178;<br>        color: #fff;<br>    }<br><br>    .cell.lv16 {<br>        background: #f67b5f;<br>        color: #fff;<br><br>    }<br><br>    .cell.lv32 {<br>        background: #f67b5f;<br>        color: #fff;<br><br>    }<br><br>    .cell.lv64 {<br>        background: #f65e3a;<br>        color: #fff;<br><br>    }<br><br>    .cell.lv128 {<br>        background: #edcf71;<br>        color: #fff;<br><br>    }<br><br>    .cell.lv256 {<br>        background: #edcc61;<br>        color: #fff;<br><br>    }<br><br>    .cell.lv512 {<br>        background: #e5c02a;<br>        color: #fff;<br><br>    }<br><br>    .cell.lv1024 {<br>        background: #edc53f;<br>        color: #fff;<br><br>    }<br><br>    .cell.lv2048 {<br>        background: #edc32e;<br>        color: #fff;<br><br>    }<br><br>    .footer {<br>        margin-top: 30px;<br>        text-align: center;<br>    }<br>    </style><br></head><br><body><br><main><br>    <div class="header"><br>        <span>score: <span id="score">0</span></span> <button id="restart">重新开始</button><br>    </div><br>    <div class="container"><br>        <div class="row"><br>            <div class="cell"></div><br>            <div class="cell"></div><br>            <div class="cell"></div><br>            <div class="cell"></div><br>        </div><br>        <div class="row"><br>            <div class="cell"></div><br>            <div class="cell"></div><br>            <div class="cell"></div><br>            <div class="cell"></div><br>        </div><br>        <div class="row"><br>            <div class="cell"></div><br>            <div class="cell"></div><br>            <div class="cell"></div><br>            <div class="cell"></div><br>        </div><br>        <div class="row"><br>            <div class="cell"></div><br>            <div class="cell"></div><br>            <div class="cell"></div><br>            <div class="cell"></div><br>        </div><br><br>    </div><br>    <div class="footer"><br>       使用 ↑ ↓ ← → 按钮进行游戏<br>    </div><br></main><br><br><script><br><br>// Created by spades<a href="&#x6d;&#97;&#105;&#x6c;&#116;&#x6f;&#x3a;&#x73;&#112;&#97;&#x64;&#x65;&#115;&#103;&#x65;&#x40;&#103;&#x6d;&#97;&#x69;&#x6c;&#46;&#99;&#111;&#109;">&#x73;&#112;&#97;&#x64;&#x65;&#115;&#103;&#x65;&#x40;&#103;&#x6d;&#97;&#x69;&#x6c;&#46;&#99;&#111;&#109;</a> on 18/04/16<br><br>let Data = new Array(16)<br>const containerEle = document.getElementsByClassName(‘container’)[0]<br>const scoreEle = document.getElementById(‘score’)<br><br>/<strong><br> <em> 生成随即索引，确定随机出现新数值的位置
 </em> @returns {<em>}
    </em>/<br>    function randomIndex() {<br>    let index<br>    do {<br>        index = Math.floor(Math.random() * 16)<br>    } while (Data[index])<br>    return index<br>    }<br><br>/</strong><br> <em> 随机出现数值，2或者4
 </em> @returns {number}<br>    <em>/<br>    function randomData() {<br>    const dataArr = [2, 4]<br>    return dataArr[Math.floor(Math.random() </em> 2)]<br>    }<br><br>/<strong><br> <em> 重绘格子区域
    </em>/<br>    function repaint() {<br>    let innerHTML = ‘’<br>    for (let i = 0; i &lt; Data.length; i++) {<br>        if (i % 4 === 0) {<br>            innerHTML += ‘<div class="row">‘<br>        }<br>        if (Data[i]) {<br>            innerHTML += <code>&lt;div class=&quot;cell lv${Data[i]}&quot;&gt;${Data[i]}&lt;/div&gt;</code><br>        } else {<br>            innerHTML += <code>&lt;div class=&quot;cell &quot;&gt;&lt;/div&gt;</code><br>        }<br>        if (i % 4 === 3) {<br>            innerHTML += ‘</div>‘<br>        }<br>    }<br>    containerEle.innerHTML = innerHTML<br>    }<br><br>/</strong><br> <em> 计算得分
    </em>/<br>    function score() {<br>    const result = Data.reduce((accumulator, currentValue) =&gt; {<br>        return accumulator + currentValue<br>    })<br>    scoreEle.innerText = result<br>    }<br><br>/<strong><br> <em> 游戏初始化
    </em>/<br>    function init() {<br>    Data = new Array(16)<br>    Data[randomIndex()] = randomData()<br>    Data[randomIndex()] = randomData()<br>    scoreEle.innerText = 0<br>    repaint()<br>    }<br><br>/</strong><br> <em> 将16个格子中数据按行或者列分类
 </em> @param isRow<br> <em> @returns {[null,null,null,null]}
    </em>/<br>    function getRowsOrColumns(isRow = true) {<br>    const classifyArr = [new Array(0), new Array(0), new Array(0), new Array(0)]<br>    Data.filter((item, index) =&gt; {<br>        let condition = index % 4<br>        if (isRow) {<br>            condition = Math.floor(index / 4)<br>        }<br>        switch (condition) {<br>            case 0:<br>                classifyArr[0].push(item)<br>                break<br>            case 1:<br>                classifyArr[1].push(item)<br>                break<br>            case 2:<br>                classifyArr[2].push(item)<br>                break<br>            case 3:<br>                classifyArr[3].push(item)<br>                break<br>            default:<br>                break<br>        }<br>    })<br>    return classifyArr<br>    }<br><br>/<strong><br> <em> 失败判断
    </em>/<br>    function isFailing() {<br>    const flag = (Data.filter(item =&gt; item).length &lt; 16)<br>    if (flag) {<br>        return<br>    }<br>    const columns = getRowsOrColumns(false)<br>    const rows = getRowsOrColumns()<br>    for (let i = 0; i &lt; 4; i++) {<br>        for (let j = 0; j &lt; columns[i].length - 1; j++) {<br>            if (columns[i][j] === columns[i][j + 1] &amp;&amp; columns[i][j]) {<br>                return<br>            }<br>        }<br>        for (let k = 0; k &lt; rows[i].length - 1; k++) {<br>            if (rows[i][k] === rows[i][k + 1] &amp;&amp; rows[i][k]) {<br>                return<br>            }<br>        }<br>    }<br>    alert(‘挑战失败!’)<br>    init()<br>    }<br><br>/</strong><br> <em> 新生成一个格子
    </em>/<br>    function addOne() {<br>    Data[randomIndex()] = randomData()<br>    score()<br>    }<br><br><br>init()<br><br>/<em>*
 </em> 执行移动操作<br> <em> @param isHorizontal  是否为水平移动
 </em> @param hasToReverse  在数据重排序过程中是否要反转，默认向上、向左为顺序不用反转；向下、向右需要反转<br>    <em>/<br>    function move(isHorizontal = true, hasToReverse = false) {<br>    let toAdd = false<br>    let isSuccessful = false<br>    const DataToString = Data.join()<br>    const items = getRowsOrColumns(isHorizontal)<br>    for (let i = 0; i &lt; 4; i++) {<br>        if (hasToReverse) {<br>            items[i].reverse()<br>        }<br>        for (let j = 0; j &lt; items[i].length - 1; j++) {<br>            if (items[i][j] === items[i][j + 1] &amp;&amp; items[i][j]) {<br>                items[i][j + 1] </em>= 2<br>                items[i].splice(j, 1)<br>                isSuccessful = (items[i][j] === 2048)<br>                toAdd = true<br>            }<br>        }<br>    }<br>    Data = new Array(16)<br>    for (let i = 0; i &lt; 4; i++) {<br>        for (let j = 0; j &lt; items[i].length; j++) {<br>            if (isHorizontal) {<br>                if (hasToReverse) {<br>                    Data[(i <em> 4) + 3 - j] = items[i][j]<br>                } else {<br>                    Data[(i </em> 4) + j] = items[i][j]<br>                }<br>            } else {<br>                if (hasToReverse) {<br>                    Data[i + (4 <em> (3 - j))] = items[i][j]<br>                } else {<br><br>                    Data[i + (4 </em> j)] = items[i][j]<br>                }<br>            }<br>        }<br>    }<br>    toAdd = (DataToString !== Data.join())<br>    if (toAdd) {<br>        addOne()<br>    } else {<br>        isFailing()<br>    }<br>    repaint()<br>    if (isSuccessful) {<br>        alert(‘恭喜，挑战成功’)<br>        init()<br>    }<br>    }<br><br><br>document.onkeyup = function (e) {<br>    switch (e.keyCode) {<br>        case 37:<br>            move(true, false)<br>            break<br>        case 38:<br>            move(false, false)<br>            break<br>        case 39:<br>            move(true, true)<br>            break<br>        case 40:<br>            move(false, true)<br>            break<br>        default:<br>            break<br>    }<br>}<br><br>document.getElementById(‘restart’).onclick = init<br><br></script><br><br></body><br></html>
                    </div>
                </div>
                  
                <div class="post-tags">
                    
                                    未设置标签
                                        
                </div>
                <ul class="pager">

    
    <li class="next">
        <a href="/2018-04-03-ECMAScript中的数据类型/" title="ECMAScript中的数据类型" class="tooltipped tooltipped-n" aria-label="ECMAScript中的数据类型">下一篇文章 <i class="fa fa-chevron-right"></i></a>
    </li>
    
</ul>

                  
            </div>
              
            
<div id="container"  style="margin-top: 70px"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
    var gitment = new Gitment({
    id:'undefined',
    owner: 'Spades-S',
    repo: 'SpadesComments',
    oauth: {
        client_id: '97c0bf26004470371f4e',
        client_secret: '2cc70304d7b9e02d6dd486319038673daebab9d9',
    },
    })
gitment.render('container')
</script>


              
        </div>
        <!-- #primary -->
        
    </div>
     

</div>
    <!-- Footer -->
    
<!-- #content -->
<div id="footer">
    <div class="container">
        <p>
            <span class="cc-license">
                <a href="https://creativecommons.org/licenses/by-sa/4.0" target="_blank" title="Creative Commons license by-sa">
                <i class="cc cc-cc"></i>
                
                    <i class="cc cc-by"></i>
                
                    <i class="cc cc-sa"></i>
                
                </a>
            </span>
            2017.2-2018 Spades.
        </p>
        <p>Themed by <a href="https://github.com/unnamed42/hexo-theme-kunkka">Kunkka</a> | Powered by <a href="https://hexo.io/">Hexo</a>.</p>
        


<div class="sns-icons">
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
</div>


    </div>
</div>
<!-- #footer -->

    <!-- Totop -->
<div id="backtoTop" data-action="gototop" title="送你上天">
    <canvas id="backtoTopCanvas" width="48" height="48"></canvas>
    <div class="percentage"></div>
</div>

<script src="/js/totop.js" type="text/javascript" async></script>


<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>


<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</body>

</html>
