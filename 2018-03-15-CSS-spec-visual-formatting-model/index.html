<!DOCTYPE html>
<html lang="zh-CN">



<!-- Head tag -->
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
    
    <title>
    
        CSS-spec-visual-formatting-model - 
    
    Spades
    </title>
    
    <meta name="keywords" content="">
    <meta name="description" content="Warning: inexperienced programmer inside!">
    <meta name="author" content="Dr. A. Clef">
    
    <link rel="alternate" type="application/atom+xml" hrel="/atom.xml">
    
    <link rel="Shortcut Icon" href="/favicon.ico" type="image/x-icon">
    
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <link href="/css/responsive.css" rel="stylesheet" type="text/css" media="screen and (max-width: 768px)">
    <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://cdn.bootcss.com/cc-icons/1.2.1/css/cc-icons.min.css" rel="stylesheet" type="text/css">
    <script src="https://cdn.bootcss.com/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script>
    <script src="/js/dropdown.js" type="text/javascript" async></script>
    <script src="/js/sidebar.js" type="text/javascript" async></script>
    
</head>


<body class="single">
    <div id="header">
    <div class="container clearfix">
        <div class="logo" style="width: auto;">
            <a href="/" title="Spades" rel="home" style="text-decoration: none;">
                
                <span class="brand-logo">
                    
                    Spades
                    
                
                </span>
            </a>
        </div>
        
<form method="get" class="search-form" action="/search.html">
    <input type="text" name="s" class="search-input" placeholder="输入关键词" />
    <button type="submit" class="search-submit">
        <span class="fa fa-search"></span>
    </button>
</form>


        <div class="global-nav">
            <ul class="gnul">
                <li class="gnli ">
                    <a class="gna" href="/" title="Spades">
                        <span class="fa fa-home"></span><span>主页</span>
                    </a>
                </li>
                
                <li class="gnli dropdown current">
                    <a class="gna dropdown-link fa fa-bars" href="javascript:;">
                        <span>导航</span>
                    </a>
                    <div class="dropdown-arrow1"></div>
                    <div class="dropdown-arrow2"></div>
                    <div class="submenu">
                        <div class="tab-content">
                            <table>
                                <tbody>
                                    
                                    <tr class="trline">
                                        <td class="tdleft">分类</td>
                                        <td class="tdright">
                                            <div class="tab-categories">
                                                <ul>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/CSS/">CSS</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/JavaScript/">JavaScript</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/readlist/">readlist</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/工程/">工程</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/运维/">运维</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/随笔/">随笔</a>
                                                    </li>
                                                
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                    
                                    <!-- <tr>
                                        <td class="tdleft">标签</td>
                                        <td class="tdright">
                                            <div class="tab-tags">
                                                <a href="/tags/阅读整理/" style="font-size: 12px;">阅读整理</a> <a href="/tags/个人总结/" style="font-size: 12px;">个人总结</a> <a href="/tags/杂感/" style="font-size: 12px;">杂感</a>
                                            </div>
                                        </td>
                                    </tr> -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>
                
                
                <li class="gnli">
                    <a class="gna" href="/archives/" title="">
                        <span class="fa fa-archive"></span>归档
                    </a>
                </li>
                
                <li class="gnli">
                    <a class="gna" href="/about/" title="">
                        <span class="fa fa-user"></span>关于
                    </a>
                </li>
                
                <li class="gnli">
                    <a class="gna" href="/2017-08-29-readlist" title="">
                        <span class="fa fa-book"></span>阅读列表
                    </a>
                </li>
                
                
                
            </ul>
        </div>
    </div>
        <div id="motto">
            
        </div>
</div>

    <div id="content">
    <div class="container clearfix">
        <div id="primary" class="no-toc">
            
            <div class="breadcrumb-navigation">
                <a rel="bookmark" href="/">
                    主页
                </a>
                <span class="breadcrumb-arrow fa fa-angle-right"></span>
                 
<a href="/categories/CSS/" title="CSS" rel="category tag">CSS</a>

                    <span class="breadcrumb-arrow fa fa-angle-right"></span>
                    CSS-spec-visual-formatting-model
            </div>
            
            <div class="single-post">
              
                <div class="post-header">
                    <h2 class="post-title">
                        <a href="/2018-03-15-CSS-spec-visual-formatting-model/" title="CSS-spec-visual-formatting-model">
                            CSS-spec-visual-formatting-model
                        </a>
                    </h2>
                </div>
              
                 <div class="post-meta">
                    <ul class="inline-ul">
                        <li class="inline-li">
                            2018-03-15
                        </li>
                        
                        <li class="inline-li">
                            <span class="post-span">·</span>
                        </li>
                        <li class="inline-li">
                             
<a href="/categories/CSS/" title="CSS" rel="category tag">CSS</a>

                        </li>
                        
                        
                        <li class="inline-li">
                            <span class="post-span">·</span>
                        </li>
                        <li class="inline-li">
                            <span id="busuanzi_value_page_pv"></span> Views
                        </li>
                        
                    </ul>
                </div>
                <div class="post-body clearfix">
                    <div class="post-content">
                        
                                <blockquote>
<p>不论是以理论为本的《CSS权威指南》还是主打工程经验的《CSS世界》，在一些概念上总给人一种含糊不清的感觉。不得已只能看<a href="https://www.w3.org/TR/CSS2/visuren.html" target="_blank" rel="noopener">css-spec</a>，也只有spec讲的透彻。不管是《权威指南》还是《CSS世界》都经过了别人的理解消化，和spec本身还是有一定的出入。一千个人眼里有一千个哈姆雷特。</p>
</blockquote>
<p><strong>1. Block-level elements and block boxes（块级元素及其相关的盒子）</strong></p>
<ul>
<li><p>Block-level box（块级框）</p>
<p>块级框是由块级元素生成的基本框，块级框是在块级格式化上下文( Block formatting context )中的。</p>
</li>
<li><p>Block container（块容器）</p>
<p>块容器包含:  { 除table boxes 和替换元素之外的块级框,  非替换inline blocks,  非替换table cells}。</p>
<p><strong>一个块容器内要么只包含块级框( block-level boxes ) 要么只包含内联级框( inline-level boxes )</strong></p>
</li>
<li><p>Block boxes（块框）</p>
<p>那些是块容器的块级框又被称为块框，也就是<strong>除table boxes和替换元素之外的块级框又叫块框</strong></p>
</li>
</ul>
<p><img src="/2018-03-15-CSS-spec-visual-formatting-model/img-1.png" width="700px">   图片来自<a href="https://stackoverflow.com/questions/30883857/css-spec-block-level-box-block-container-box-and-block-box" target="_blank" rel="noopener">stack overflow</a> ，侵删 </p>
<p><strong>2. Inline-level elements and inline boxes（内联元素及其相关的盒子）</strong></p>
<ul>
<li><p>Inline-level box（内联级框）</p>
<p>内联级框由内联元素生成，在内联格式化上下文中( Inline formatting context )</p>
</li>
<li><p>Inline box（内联框）</p>
<p>内容物在内联格式化上下文中的内联级框。<strong>display值为inline的非替换元素会生成内联框</strong></p>
</li>
<li><p>Atomic inline-level box （原子内联级框）</p>
<p>不是内联框的内联级框，这么说其实有点绕，换一种说法，内容物不再内联格式化上下文中的，比如替换inline-level元素、inline-block元素、inline-table元素生成的内联级框</p>
<p><img src="/2018-03-15-CSS-spec-visual-formatting-model/img-2.png" width="500px">     图片来自<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Visual_formatting_model" target="_blank" rel="noopener">MDN</a> ，侵删 </p>
</li>
<li><p>Anonymous inline boxes （匿名内联框）</p>
<p>任何直接包含在块容器内部的文字都会生成匿名内联框。空白内容不会生成匿名块级框，空白内容受<strong>white-space属性</strong>控制</p>
</li>
</ul>
<p><strong>3. 盒子放置</strong></p>
<p>在CSS2.1中，一个盒子能够放置在常规文档流中( Normal flow )，或者是“浮动流”( Floats )中，或者绝对定位流( Absolute positioning )中，绝对定位流包含了<strong>绝对定位和固定定位</strong>。浮动流和绝对定位流是我个人杜撰出来的名词🤡。</p>
<blockquote>
<p>In CSS 2.1, a box may be laid out according to three positioning schemes:</p>
<ol>
<li>Normal flow. In CSS 2.1, normal flow includes block formatting of block-level boxes, inline formatting of inline-level boxes, and relative positioning of block-level and inline-level boxes.</li>
<li>Floats. In the float model, a box is first laid out according to the normal flow, then taken out of the flow and shifted to the left or right as far as possible. Content may flow along the side of a float.</li>
<li>Absolute positioning. In the absolute positioning model, a box is removed from the normal flow entirely (it has no impact on later siblings) and assigned a position with respect to a containing block.</li>
</ol>
</blockquote>
<p><strong>4. 格式化上下文（formatting context）</strong></p>
<p>在常规文档流中的各种盒子是处在格式化上下文中的，块级盒子在块级格式化上下文( BFC )中，内联级盒子在内联格式化上下文( IFC )中。</p>
<ul>
<li>块级格式化上下文( BFC )<ul>
<li>浮动元素、绝对定位元素、生成块容器且不生成块框的元素(inline-block元素、table-cell元素、table-captions元素)、生成块框且overflow属性不为visible的元素会<strong>为其内容物生成新的BFC</strong></li>
<li>在同一个BFC中，相邻的垂直margin会塌陷( collapse ) ，[ <strong>我在其他博文里也写过margin塌陷，如果和本文有冲突，以本文为准</strong> ]</li>
</ul>
</li>
<li><p>内联格式化上下文( IFC )</p>
<ul>
<li><p>行框：包含了构成一个文本行的所有内联/内联级/原子内联级盒子的矩形区域 ( The rectangular area that contains the boxes that form a line is called a line box )。行框的宽度是由包含块宽度和周围是否存在浮动元素决定的。</p>
</li>
<li><p>当行框中内联/内联级/原子内联级盒子A高度小于行框高度时，盒子A的对齐方式是由vertical-align属性决定的。</p>
</li>
<li><p>当一个行框无法容纳下多个内联/内联级/原子内联级盒子时，他们会被放在多个行框中，多个行框中内有分隔、没有重叠</p>
</li>
<li><p>当一个内联/内联级/原子内联级盒子 B 宽度超出了行框宽度时，盒子B会被拆成多个盒子，如果盒子B不能拆分(B中只有单个字符、word break 的特殊属性等)，会发生内容溢出。盒子B被拆分后，margin、border、padding不会有视觉变化</p>
<p><img src="/2018-03-15-CSS-spec-visual-formatting-model/img-3.png" width="400px">     图片来自<a href="https://www.w3.org/TR/CSS2/visuren.html#block-boxes" target="_blank" rel="noopener">CSS-spec</a> ，侵删 </p>
<p>​</p>
</li>
</ul>
</li>
</ul>

                    </div>
                </div>
                  
                <div class="post-tags">
                    
                        
                            <a href="/tags/阅读整理/" title="阅读整理" rel="tag" class="fa fa-tag">
                                阅读整理
                            </a>
                            
                                
                </div>
                <ul class="pager">

    <li class="previous">
        <a href="/2018-03-27-回调的三生三世/" title="回调的三生三世" class="tooltipped tooltipped-n" aria-label="回调的三生三世"><i class="fa fa-chevron-left"></i> 上一篇文章</a>
    </li>
    
    
    <li class="next">
        <a href="/2018-03-08-css权威指南-浮动和定位/" title="css权威指南-浮动和定位" class="tooltipped tooltipped-n" aria-label="css权威指南-浮动和定位">下一篇文章 <i class="fa fa-chevron-right"></i></a>
    </li>
    
</ul>

                  
            </div>
              
            
<div id="container"  style="margin-top: 70px"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
    var gitment = new Gitment({
    id:'undefined',
    owner: 'Spades-S',
    repo: 'SpadesComments',
    oauth: {
        client_id: '97c0bf26004470371f4e',
        client_secret: '2cc70304d7b9e02d6dd486319038673daebab9d9',
    },
    })
gitment.render('container')
</script>


              
        </div>
        <!-- #primary -->
        
    </div>
     

</div>
    <!-- Footer -->
    
<!-- #content -->
<div id="footer">
    <div class="container">
        <p>
            <span class="cc-license">
                <a href="https://creativecommons.org/licenses/by-sa/4.0" target="_blank" title="Creative Commons license by-sa">
                <i class="cc cc-cc"></i>
                
                    <i class="cc cc-by"></i>
                
                    <i class="cc cc-sa"></i>
                
                </a>
            </span>
            2017.2-2018 Spades.
        </p>
        <p>Themed by <a href="https://github.com/unnamed42/hexo-theme-kunkka">Kunkka</a> | Powered by <a href="https://hexo.io/">Hexo</a>.</p>
        


<div class="sns-icons">
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
</div>


    </div>
</div>
<!-- #footer -->

    <!-- Totop -->
<div id="backtoTop" data-action="gototop" title="送你上天">
    <canvas id="backtoTopCanvas" width="48" height="48"></canvas>
    <div class="percentage"></div>
</div>

<script src="/js/totop.js" type="text/javascript" async></script>


<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>


<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</body>

</html>
