<!DOCTYPE html>
<html lang="zh-CN">



<!-- Head tag -->
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
    
    <title>
    
        ECMAScript中的数据类型 - 
    
    Spades
    </title>
    
    <meta name="keywords" content="">
    <meta name="description" content="Warning: inexperienced programmer inside!">
    <meta name="author" content="Dr. A. Clef">
    
    <link rel="alternate" type="application/atom+xml" hrel="/atom.xml">
    
    <link rel="Shortcut Icon" href="/favicon.ico" type="image/x-icon">
    
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <link href="/css/responsive.css" rel="stylesheet" type="text/css" media="screen and (max-width: 768px)">
    <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://cdn.bootcss.com/cc-icons/1.2.1/css/cc-icons.min.css" rel="stylesheet" type="text/css">
    <script src="https://cdn.bootcss.com/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script>
    <script src="/js/dropdown.js" type="text/javascript" async></script>
    <script src="/js/sidebar.js" type="text/javascript" async></script>
    
</head>


<body class="single">
    <div id="header">
    <div class="container clearfix">
        <div class="logo" style="width: auto;">
            <a href="/" title="Spades" rel="home" style="text-decoration: none;">
                
                <span class="brand-logo">
                    
                    Spades
                    
                
                </span>
            </a>
        </div>
        
<form method="get" class="search-form" action="/search.html">
    <input type="text" name="s" class="search-input" placeholder="输入关键词" />
    <button type="submit" class="search-submit">
        <span class="fa fa-search"></span>
    </button>
</form>


        <div class="global-nav">
            <ul class="gnul">
                <li class="gnli ">
                    <a class="gna" href="/" title="Spades">
                        <span class="fa fa-home"></span><span>主页</span>
                    </a>
                </li>
                
                <li class="gnli dropdown current">
                    <a class="gna dropdown-link fa fa-bars" href="javascript:;">
                        <span>导航</span>
                    </a>
                    <div class="dropdown-arrow1"></div>
                    <div class="dropdown-arrow2"></div>
                    <div class="submenu">
                        <div class="tab-content">
                            <table>
                                <tbody>
                                    
                                    <tr class="trline">
                                        <td class="tdleft">分类</td>
                                        <td class="tdright">
                                            <div class="tab-categories">
                                                <ul>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/CSS/">CSS</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/JavaScript/">JavaScript</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/readlist/">readlist</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/工程/">工程</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/运维/">运维</a>
                                                    </li>
                                                
                                                    <li class="cat-item">
                                                        <a href="/categories/随笔/">随笔</a>
                                                    </li>
                                                
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                    
                                    <!-- <tr>
                                        <td class="tdleft">标签</td>
                                        <td class="tdright">
                                            <div class="tab-tags">
                                                <a href="/tags/阅读整理/" style="font-size: 12px;">阅读整理</a> <a href="/tags/个人总结/" style="font-size: 12px;">个人总结</a> <a href="/tags/杂感/" style="font-size: 12px;">杂感</a>
                                            </div>
                                        </td>
                                    </tr> -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>
                
                
                <li class="gnli">
                    <a class="gna" href="/archives/" title="">
                        <span class="fa fa-archive"></span>归档
                    </a>
                </li>
                
                <li class="gnli">
                    <a class="gna" href="/about/" title="">
                        <span class="fa fa-user"></span>关于
                    </a>
                </li>
                
                <li class="gnli">
                    <a class="gna" href="/2017-08-29-readlist" title="">
                        <span class="fa fa-book"></span>阅读列表
                    </a>
                </li>
                
                
                
            </ul>
        </div>
    </div>
        <div id="motto">
            
        </div>
</div>

    <div id="content">
    <div class="container clearfix">
        <div id="primary" class="no-toc">
            
            <div class="breadcrumb-navigation">
                <a rel="bookmark" href="/">
                    主页
                </a>
                <span class="breadcrumb-arrow fa fa-angle-right"></span>
                 
<a href="/categories/JavaScript/" title="JavaScript" rel="category tag">JavaScript</a>

                    <span class="breadcrumb-arrow fa fa-angle-right"></span>
                    ECMAScript中的数据类型
            </div>
            
            <div class="single-post">
              
                <div class="post-header">
                    <h2 class="post-title">
                        <a href="/2018-04-03-ECMAScript中的数据类型/" title="ECMAScript中的数据类型">
                            ECMAScript中的数据类型
                        </a>
                    </h2>
                </div>
              
                 <div class="post-meta">
                    <ul class="inline-ul">
                        <li class="inline-li">
                            2018-04-03
                        </li>
                        
                        <li class="inline-li">
                            <span class="post-span">·</span>
                        </li>
                        <li class="inline-li">
                             
<a href="/categories/JavaScript/" title="JavaScript" rel="category tag">JavaScript</a>

                        </li>
                        
                        
                        <li class="inline-li">
                            <span class="post-span">·</span>
                        </li>
                        <li class="inline-li">
                            <span id="busuanzi_value_page_pv"></span> Views
                        </li>
                        
                    </ul>
                </div>
                <div class="post-body clearfix">
                    <div class="post-content">
                        
                                <p>ECMAScript里一共是由以下几种类型的：Undefined、Null、Boolean、String、Number、Object、Symbol，其中<strong>Symbol是ES6中新加入的类型。我们暂时先把Symbol放在一边，只讨论其他六种类型，亦即ES5中的六种数据类型</strong>。</p>
<h2 id="Part-1—-简单数据类型，复杂数据类型"><a href="#Part-1—-简单数据类型，复杂数据类型" class="headerlink" title="Part 1— {简单数据类型，复杂数据类型}"></a>Part 1— {简单数据类型，复杂数据类型}</h2><p><img src="/2018-04-03-ECMAScript中的数据类型/img-1.png"><br><strong>上图来自ECMAScript Specification 5th Edition</strong></p>
<p>从规范里，我们可以看到在ES5中有且只有六种数据类型，只要是ES5中的数据，不管有多么清奇的叫法，追根溯源，必然是这六种数据类型中的一种。</p>
<p>我们可以将ES5中的六种数据类型做个简单的分类， <strong>【简单数据类型</strong>，<strong>复杂数据类型</strong>】 。这种分类方法是Zakas在红宝书里提到的。简单数据类型包括：<strong>Undefined，Null，Boolean，String，Number </strong>，复杂数据类型相对比较孤单，只有<strong>Object</strong>一种。之所以 <strong>Undefined，Null，Boolean，String，Number</strong> 会被划入简单数据类型，是因为这五种类型的可取值有限：</p>
<ul>
<li>Undefined类型只有一个值：undefined</li>
<li>Null类型只有一个值：null</li>
<li>Boolean类型有两个值：true、false</li>
<li>String类型的值：字符串</li>
<li>Number类型的值：数字</li>
</ul>
<p>比之于上面五种类型，Object取值就很复杂了，Object本质上是由一组无序的键值对组成的。</p>
<p>那我们如何去检测一个数据是什么类型的呢？ES中有一个<strong>typeof</strong>运算符可以用来检测数据类型，使用typeof运算符的确可以检测大部分数据类型，但是需要注意：</p>
<ul>
<li>typeof  null  返回的是object</li>
<li>typeof function 返回的是function，而不是object</li>
</ul>
<p>那为什么typeof null 返回值是object呢？我们先来看一下MDN上的解释：<u><em>在 JavaScript 最初的实现中，JavaScript 中的值是由一个表示类型的标签和实际数据值表示的。对象的类型标签是 0。由于 null 代表的是空指针（大多数平台下值为 0x00），因此，null的类型标签也成为了 0，typeof null就错误的返回了”object”</em></u> 。现在大家普遍认同，typeof null 返回object 是一个历史错误，为了保持兼容性而维持到现在，ECMAScript提出过一个修复，但是被残忍拒绝了。</p>
<p>那为什么typeof function 不返回object呢？这里我们还是来看一下贺老的回答，<a href="https://www.zhihu.com/question/24804474" target="_blank" rel="noopener">js里function也算一种基本类型？</a> <u>看完回答是不是又要惊叹贺老的深厚技术底蕴了？</u>总结下贺老的回答，核心就是<strong>在spec里，typeof只是一个运算符，其返回值并不能作为JS类型依据</strong></p>
<h2 id="Part-2—-基本数据类型，引用数据类型"><a href="#Part-2—-基本数据类型，引用数据类型" class="headerlink" title="Part 2— {基本数据类型，引用数据类型}"></a>Part 2— {基本数据类型，引用数据类型}</h2><p>{基本数据类型，引用数据类型}和{简单数据类型，复杂数据类型}之间有什么异同呢？它们只是按照不同标准对ES5中6种数据类型的不同分类罢了，没有实质上的区别。<u>{基本数据类型，引用数据类型}是根据值访问、引用访问来对数据类型进行的分类，{简单数据类型，复杂数据类型}的分类标准更加随意，由数据类型取值复杂程度进行分类</u>。</p>
<p>基本数据类型和引用数据类型又具体包含哪些呢？</p>
<ul>
<li><p>基本数据类型：Undefined、Null、Boolean、Number、String</p>
</li>
<li><p>引用数据类型：除了上面的5中基本类型，剩下的就是引用类型。<strong>统称为Object类型，细分的话有：Object类型、Array类型、Date类型、RegExp类型、Function类型等</strong>，这个说法是我从<a href="https://segmentfault.com/a/1190000006752076" target="_blank" rel="noopener">JavaScript 深入了解基本类型和引用类型的值</a>借鉴来的，目前为止我没有在相对权威的资料中看到过。这个说法我个人认为是正确的，Object.prototype.toString.call()可以佐证。</p>
<p><img src="/2018-04-03-ECMAScript中的数据类型/img-2.png"></p>
</li>
</ul>
<p><strong>在ES中，变量是没有类型的，只有值才有类型。对变量执行typeof操作，得到的并不是变量的类型，而是变量持有的值的类型。ES中变量可能持有两种类型的值：基本类型的值和引用类型的值。基本类型的值是按值访问的，引用类型的值是按引用访问的。</strong></p>
<p>👆上面的这段话说的其实相当拗口，看完大多数人也就是云里雾里。还是看看在ES中存储机制。</p>
<h2 id="Part3—-ES中的存储机制"><a href="#Part3—-ES中的存储机制" class="headerlink" title="Part3—{ES中的存储机制}"></a>Part3—{ES中的存储机制}</h2><p><strong>1.  堆与栈</strong></p>
<p>内存空间可以分为栈空间和堆空间。<br>栈空间：由操作系统自动分配释放，存放函数参数值、局部变量的值等。其操作方式类似于数据结构中的栈。<br>堆空间：一般由程序员分配释放，需要考虑垃圾回收问题。</p>
<p><strong>2. 引用类型和基本类型的存储</strong></p>
<p>基本类型：在内存中占据固定大小，基本类型的值保存在栈空间中，按值访问。<br>引用类型：引用类型值大小不固定，需要动态为其分配内存空间，所以引用类型的值是存储在堆内存中的。其地址是固定大小的，可以将其地址保存在栈空间中。</p>
<p><img src="/2018-04-03-ECMAScript中的数据类型/img-3.png">   图片来自<a href="https://segmentfault.com/a/1190000006104910" target="_blank" rel="noopener">【前端进阶之路】内存基本知识</a>，侵删</p>
<p><strong>3.  访问引用类型变量</strong></p>
<p>访问引用类型变量时，先从栈空间中读取地址，再根据地址找到堆空间中保存的具体的值。这是一个透明的过程。</p>
<p><strong>4.  参数传递：值传递？引用传递？</strong></p>
<p>ES中所有的传递都是值传递。对于保存基本类型值的变量来说是没有任何异议的。<strong>对于保存引用类型的值的变量来说，实质上保存的是引用类型值的地址，它们之间也采用值传递，传递的内容即引用类型值的地址。</strong></p>
<p><strong>5.  变量复制</strong></p>
<p>基本类型：会复制变量值，复制前后两个变量独立。<br>引用类型：也会复制<strong><em>变量值</em></strong>，这个地方的变量值是指变量中实际存储的引用类型值的地址。复制前后两个变量将保存指向同一内存空间的地址，使用任一变量修改该地址指向的内容，将会同时影响通过两个变量访问到的引用类型实际值。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li>【文章】<a href="https://segmentfault.com/a/1190000006752076" target="_blank" rel="noopener">JavaScript 深入了解基本类型和引用类型的值</a></li>
<li>【知乎】<a href="https://www.zhihu.com/question/24804474" target="_blank" rel="noopener">js里function也算一种基本类型？</a></li>
<li>【文章】<a href="https://segmentfault.com/a/1190000006104910" target="_blank" rel="noopener">前端进阶之路-内存基本知识</a></li>
</ul>

                    </div>
                </div>
                  
                <div class="post-tags">
                    
                        
                            <a href="/tags/个人总结/" title="个人总结" rel="tag" class="fa fa-tag">
                                个人总结
                            </a>
                            
                                
                </div>
                <ul class="pager">

    <li class="previous">
        <a href="/2018-05-03-重读红宝书-面向对象的程序设计/" title="重读红宝书-面向对象的程序设计" class="tooltipped tooltipped-n" aria-label="重读红宝书-面向对象的程序设计"><i class="fa fa-chevron-left"></i> 上一篇文章</a>
    </li>
    
    
    <li class="next">
        <a href="/2018-03-27-回调的三生三世/" title="回调的三生三世" class="tooltipped tooltipped-n" aria-label="回调的三生三世">下一篇文章 <i class="fa fa-chevron-right"></i></a>
    </li>
    
</ul>

                  
            </div>
              
            
<div id="container"  style="margin-top: 70px"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
    var gitment = new Gitment({
    id:'undefined',
    owner: 'Spades-S',
    repo: 'SpadesComments',
    oauth: {
        client_id: '97c0bf26004470371f4e',
        client_secret: '2cc70304d7b9e02d6dd486319038673daebab9d9',
    },
    })
gitment.render('container')
</script>


              
        </div>
        <!-- #primary -->
        
    </div>
     

</div>
    <!-- Footer -->
    
<!-- #content -->
<div id="footer">
    <div class="container">
        <p>
            <span class="cc-license">
                <a href="https://creativecommons.org/licenses/by-sa/4.0" target="_blank" title="Creative Commons license by-sa">
                <i class="cc cc-cc"></i>
                
                    <i class="cc cc-by"></i>
                
                    <i class="cc cc-sa"></i>
                
                </a>
            </span>
            2017.2-2018 Spades.
        </p>
        <p>Themed by <a href="https://github.com/unnamed42/hexo-theme-kunkka">Kunkka</a> | Powered by <a href="https://hexo.io/">Hexo</a>.</p>
        


<div class="sns-icons">
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
</div>


    </div>
</div>
<!-- #footer -->

    <!-- Totop -->
<div id="backtoTop" data-action="gototop" title="送你上天">
    <canvas id="backtoTopCanvas" width="48" height="48"></canvas>
    <div class="percentage"></div>
</div>

<script src="/js/totop.js" type="text/javascript" async></script>


<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>


<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</body>

</html>
